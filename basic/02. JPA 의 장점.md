# JPA 를 사용했을 때의 장점

### JPA 는 자바 진영에서 제공하는 표준 ORM 프레임워크이다.

ORM(Object-Relational Mapping)은 이름 그대로 객체와 관계형 데이터베이스를 매핑한다는 뜻이다. 따라서 패러다임 불일치 문제를 해결해 준다. 그 중에서 `하이버네이트 ORM 프레임워크`를 가장 많이 사용한다.

- JPA 의 내부 구조
 - 자바 애플리케이션 안에 JPA 가 있고 JPA 안에 JDBC API 가 있어서 DB와 통신한다.
 - DAO 에서 persist(entity object) 를 통해 JPA 와 통신하고 JPA 에서는 다음과 같은 과정을 거친다.
   - 1. Entity 분석
   - 2. SQL 생성
   - 3. JDBC API 사용하여 DB 와 통신
   - 4. 패러다임 불일치 해결

### 애플리케이션을 SQL 이 아닌 객체 중심으로 개발할 수 있다.

- 생산성과 유지보수성이 좋아진다.
- 테스트 작성이 편리하다.
- 버그가 많이 줄어든다.
- 개발 단계에서 MySQL 을 사용하다가 오픈 시점에 Oracle 로 DB 가 바뀌더라도 코드 수정이 거의 없이 DB 를 변경할 수 있다.
- 반복적인 CRUD SQL 을 작성하고 객체를 SQL 에 매핑하는 시간을 줄일 수 있다.
- SQL 에 의존적인 개발을 하지 않을 수 있다.

### 객체와 관계형 데이터베이스의 패러다임 불일치 문제를 해결해 준다.

[객체를 테이블에 맞춰 모델링 vs 객체지향 모델링](https://github.com/BAEKJungHo/JPA/blob/main/basic/03.%20%EA%B0%9D%EC%B2%B4%EC%A7%80%ED%96%A5%20%EB%AA%A8%EB%8D%B8%EB%A7%81.md)

### JPA 를 사용하면 객체 그래프를 마음껏 탐색할 수 있다.

SQL 을 직접 다루는 경우에는 처음 실행하는 SQL 에 따라 객체 그래프를 어디까지 탐색할 수 있는지 정해진다.

```java
member.getOrder().gerOrderItem(); // 객체 그래프 탐색
```

- 이 기능은 실제 객체를 사용하는 시점까지 데이터베이스 조회를 미룬다고해서 `지연 로딩` 이라고 한다.

```java
// 지연 로딩 사용
// 처음 조회 시점에 SELECT SQL
Member member = jpa.find(Member.class, memberId);
Order order = member.getOrder();
order.getOrderDate(); // Order 를 사용하는 시점에 SELECT SQL
```

### JPA 는 같은 트랜잭션일 때 같은 객체가 조회되는 것을 보장한다.

```java
String id = "100";
User user1 = jpa.find(User.class, id);
User user2 = jpa.find(User.class, id);

user1 == user2; // 주소 값이 같다.
```
