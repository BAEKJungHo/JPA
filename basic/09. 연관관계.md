# 연관관계

객체 관계 매핑(ORM)에서 가장 어려운 부분이 바로 객체 연관관계와 테이블 연관관계를 매핑하는 일이다. 즉, __객체의 참조와 테이블의 외래 키를 매핑하는 것__ 이 중요하다.

- 방향(Direction)
  - 단방향
    - 회원 -> 회사 or 회사 -> 회원 둘 중 한쪽만 참조하는 것
  - 양방향
    - 테이블은 항상 양방향이다.

- 다중성(Multiplicity)
  - 다대일(N:1) : 회원(N)이 속한 회사(1)를 조회
  - 일대다(1:N) : 회사(1)가 자기 회원(N)을 조회
  - 일대일(1:1) 
  - 다대다(N:M)

- 연관관계의 주인(owner)
  - 객체를 양방향 연관관계로 만들면 연관관계의 주인을 정해야 한다.

## 다대일 연관관계

- 객체 연관관계
  - 회원이 회사를 조회하는 다대일 연관관계의 경우 회원 필드에는 회사를 참조하고 있는 필드가 존재한다. 반면 회사 엔티티에는 회원을 참조하는 필드가 존재하지 않는다.
- 테이블 연과관계
  - 회원 테이블은 회사의 외래키를 가지고 있어서 서로 조인하여 조회할 수 있다. 따라서 양방향 연관관계이다.

> 객체 연관관계와 테이블 연관관계의 가장 큰 차이
>
> 객체간에 연관관계를 양방향으로 만들고 싶으면 반대쪽에도 참조하는 필드를 추가해야 한다. 결국 연관관계를 하나 더 만들어야 하는데 정확히는 `양방향이 아니라 서로 다른 단방향 관계가 2개`인 것이다.
> 반면, 테이블은 외래 키 하나로 양방향으로 조인할 수 있다.

