# 권장하는 식별자 선택 전략

- 데이터베이스 기본 키는 다음 3가지 조건을 모두 만족해야 한다.
  - null 값은 허용하지 않는다.
  - 유일해야 한다.
  - 변해선 안 된다.
- 테이블의 기본 키를 선택하는 전략은 크게 2가지가 있다.
  - 자연 키(natural key)
    - 비지니스에 의미가 있는 키(ex. 주민번호, 이메일, 전화번호)
  - 대리 키(surrogate key)
    - 비지니스와 관련 없는 임의로 만들어진 키, 대체키로도 불린다.
    - ex) 오라클 시퀀스, auto_increment 등
  - 자연 키 보다는 대리 키를 권장
    - 비지니스 규칙은 생각보다 쉽게 변하기 때문이다. (주민번호 조차 바뀔 수 있다.)
    - 주민번호를 식별자로 했다가, 정부 정책 때문에 주민번호를 DB 에 저장할 수 없게된다면 심각한 상황이 발생한다.
    - 주민번호나 이메일처럼 자연 키의 후보가 되는 컬럼들은 필요에 따라 유니크 인덱스를 설정해서 사용하는 것을 권장한다.
- `JPA 는 모든 엔티티에 일관된 방식으로 대리 키 사용을 권장한다.`

> 기본 키는 변하면 안 된다는 기본 원칙으로 인해, 저장된 엔티티의 기본 키 값은 절대 변경되서는 안된다. 따라서 setId() 같이 식별자를 수정하는 메서드를 외부에 공개하지 않는 것도 방법이다.
